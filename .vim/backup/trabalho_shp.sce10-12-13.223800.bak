
//////  Trabalho projeto SHP 2010-2
//
//
//
//----------- Parametros para o cálculo da flambagem da haste ----------- //
F=18e3   //  Força no atuador
n=3.5    // Coeficiente de seguraça


// --------- Propriedades do material 
//
//  Aço Inoxidável 304 	RC hibbeler
E=193e9  //  Módulo da elasticiade
R=207e6	 // Tensão de escoamento



//---------------------------------------------------
// lg lambada g
lg= %pi*sqrt(1.25*E/R)


L=0.100  	// Comprimento total da haste do curso em metros
Lk=2*L	// Comprimento equivalente da haste 

	// Valor imposto de lambda (design)
//	lambda=[110 120 130 140 150 180 200 210 ]

   // caso lambda > lg
//   for l=lambda 
//   
//   d=4*Lk/l;	 		// Diametro da haste
//   J=%pi*d^4/64; 	 // Momento de inercia da haste
//   Fmax=%pi^2*E*J/(n*Lk^2); //	printf("lambda=%f d=%f J=%f Fmax=%f \n--------------\n",l,d*1000,J,Fmax/1000)
//   end



//----------Dimensionamento com base na variação do comprimento da haste
//
//
L_= [ 0.1 0.2 0.3 0.4 0.5 0.4 0.6 0.7 0.8 0.9 1 2 3 4 5 6 7 8 9] //  Valores possíveis para o comprimento da haste em metros
// Supondo inicialmente haste longa la>lg

Fmax=18e3;

for L=L_
Lk=2*L;
  J=n*Lk^2*Fmax/(%pi^2*E);
  d=(64*J/%pi)^(1/4);
  la=4*Lk/d;
printf("L=%f lambda=%f d=%f J=%f Fmax=%f \n--------------\n",L,la,d*1000,J,Fmax/1000);
end


// Cálculo supondo haste curta
x=poly(0,'x');
for L=L_
	
	Lk=2*L;
	P=335*%pi*x^2-4*0.62*%pi*x*Lk-4*n*Fmax;
	p=roots(P);
	d=p(2);
	la=4*Lk/d;
printf("L=%f lambda=%f d=%f  Fmax=%f \n--------------\n\n",L,la,d*1000,Fmax/1000);
end




// Dimensionameto com base no diametro da haste
//
// Possíveis diametros em mm
//
L=0.1 // 100 mm
Lk=2*L
D=[12 14 16 18 22 25 36 45 50 56 63 70 90 100 110 140 160 200 220 ]*1e-3 

printf("\n Dimensionamento variando os valores comerciais de diametro do pistão e calculando a força máxima na haste \n\n");

// Resultado dos cálculos
u=file('open',"/tmp/resultados_flambagem");


for L=L_

	Lk=2*L;
	printf("\n ==================================== \nHaste de comprimento L=%f",L)
	fprintf(u,"\n Haste de comprimento L=%f \n\n",L);
	fprintf(u,"d (mm)\t\tla\t\t\tFmax (kN)");
	
	for d=D

	lambda=4*Lk/d;

			if(lambda>lg)	

			J=%pi*d^4/64;
			Fmax=%pi^2*E*J/(n*Lk^2);

			else

			Fmax=%pi*d^2*(335-0.62*lambda)/(4*n);	
			end
	
			if(18e3<Fmax & Fmax <40e3)
			printf("\n d=%f mm la=%f Fmax=%f kN\n",d*1000,lambda,Fmax/1000);
			fprintf(u,"\n%f\t%f\t\t%f\n",d*1000,lambda,Fmax/1000);
			end
	end
	
end


file('close',u); //Fecha arquivo


