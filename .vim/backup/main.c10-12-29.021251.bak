/*--------------------------------------------------------------
                main.c
  
PIC16F877A 4MHZ Clock

Caio Rodrigues Soares Silva

	Contador de números de vezes em que se aperta e solta o botão


--------------------------------------------------------------*/


/* Processador de arquivo de cabeçalho */

#define clock4mhz
#define __16f877a

#include "pic/pic16f877a.h"
#include "commdefs.h"
#include "delay.h"
//#include "adc.h"




typedef unsigned int config;


config at 0x2007 __CONFIG= 
_WDT_OFF &		// Sem Watch dog timer 
_PWRTE_ON & 	// Com Power-On Reset
_BODEN_OFF &	// Com
_CP_OFF & 	    // Sem proteção do código
_DEBUG_OFF & 	// Sem debugger
_HS_OSC & 		// Oscilador cristal 4 MHZ
_CPD_OFF & 		//
_LVP_OFF; 		// Sem LVP:Low Voltage Programmming


#define counter PORTB
#define tris_counter PORTB	


//	Macro para processar o aperto e soltura do botão
//	Para botão solto em 0
//
#define press_release(SW)	\
		while(!(SW));			\
		delay_ms(20);		\
		while((SW));			\
		delay_ms(20);




#define SW1 RA0			
#define tris_SW1 TRISA0
							// Botão normalmente em nível 0 em RA0 ou PORTA0
							//
							//	Solto 			RA0/SW1=	0
							//	Pressionado		RA0/SW1=	1
							//
							//	  +5V
							//	  ----			__________
							//		|		   
							//		|		   |
							// SW1 	|		   |
							//	==|			   |
							//		|----------|RA0
							//	   ---		   |
							//	   | |		   |_______
							//	   | |
							//     ---
							//		|
							//	 ------
							//	   GND
							//
				
void delay_ms(u8 time); 



void main(){

		CMCON=7;		  // Desabilita comparadores analógicos
		ADCON0=6;		  // Todas entradas analógicas desabilitadas
		INTCON=0;		  //Sem interrupção


		//Inciar o contador , fazê-lo 0
		counter=0;		// O contador inicia em 0
		tris_counter=0;	//PORTB será saída
		
		//Inicializa chave tactil
		SW1=0;
		tris_SW1=1;		//Entrada digital


		
		while(1){/*Loop Para sempre*/

		 		   press_release(SW1); // O contador so é incrementado 
				   					  // quando se aperta o botão 
				   counter++;

				}



} //end of main

/*----------------------------------------------------------*/





/*------------------------------------------------------------------
 ---------------------  END OF FILE --------------------------------
 ------------------------------------------------------------------*/
