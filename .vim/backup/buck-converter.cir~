* Buck Regulator with Vswitch
.SUBCKT Ideal_Diode anode cathode
Vx anode int DC 0V
Ed int cathode TABLE {I(Vx)}=(-0.01A,-30V) (0A,0V)
.ENDS
Vpls 10 0 PULSE(0V 2V 0s 1us 1us 49us 100us)
Rpls 10 0 1MEG
Vdc   1 0 DC 20V
Sw1   1 2 10 0 Smod
Xd    0 2 Ideal_Diode
.MODEL Smod VSWITCH(Ron=1m Roff=1MEG Von=1V Voff=0V)
Lf    2 3 250uH IC=4.00A
Cf    3 0  50uF IC=10.0V
RL    3 0 2.0
.PROBE
.TRAN 1us 1ms 0us 1us UIC
.END
