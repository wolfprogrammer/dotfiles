
%  Referência Mohan
%
%

P= 60   % W potência máxima  do painel
Vd=17   % Tensão de potência máxima do painel


Vo=12 % V Tensão da bateria
Fs=20 % kHz frequência do conversor

ri=20    % Ripple de tensão e corrente em %
rv=1

%-----------------%
ri=ri/100
rv=rv/100
 

fs=1e3*Fs
Ts=1/fs


Io=P/Vo % Corrente máxima de saída
IL=Io
D= Vo/Vd
D1=1-D

diL=ri*IL

% Minimo indutor
Lmin=Vo*(1-D)*Ts/diL

% Capacitor minimo
dvo=rv*Vo
Cmin=diL*Ts/(8*dvo)

% Frequência natural Hz
L=Lmin
C=Cmin
fc=1/(2*pi*sqrt(L*C))

ILB=Ts*Vo*(1-D)/(2*L)

%   A tensão de entrada varia enquanto que a
% a tensão de saída permanece constante
% o objetivo é simular em diferentes condições 
% de potência tensão e corrente
diL_max=diL
dvo_max=dvo
save  buckcalc.txt   L C fs Ts Vo  diL_max dvo_max


%	Testes
%
disp(' Teste do conversor buck')
VV=[ 12 14 15 16 17 19 19.5 20 20.5 21]

for V= VV
	V
	i=ipvs(V)
	P=V*i
	bucktest(V,P)
	disp('')
	disp('')
end


