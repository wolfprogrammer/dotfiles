
#ifndef _pwm_h_
#define _pwm_h_

#include "commdefs.h"
#include "pic/pic16f877a.h"

#define tmr2_1b1      0x00
#define tmr2_1b4      0x01
#define tmr2_1b16     0x02

// Rotinas par o gerador PWM interno do MCU
// RC2/CCP1
void setPWM1freq(u8 ticks){

    CCP1CON=0;            //Turn Off PWM channel1

    TMR2ON=1;

    TRISC2=0;             //Configura TRISC2 como saída
    PR2=ticks;
    CCP1CON|=0b00001100;   //Turn On  PWM channel1
}


// duty_cycle é um valor de 10 bits, até 1024
void setPwm1_dcy(u16 duty_cycle){

    CCP1CON|=(duty_cycle & 0x03)<<5;
    CCP1RL=duty_cycle>>2;


}





#endif
/*------------------------------------------------
 ============ END OF FILE =====================
 - ---------------------------------------------*/
