/*--------------------------------------------------------------
                main.c
  
PIC16F877A 4MHZ Clock

Caio Rodrigues Soares Silva






--------------------------------------------------------------*/


/* Processador de arquivo de cabeçalho */

#define clock4mhz
#define __16f877a

#include "pic/pic16f877a.h"
#include "commdefs.h"
#include "delay.h"
#include "pwm.h"
//#include "adc.h"


typedef unsigned int config;


config at 0x2007 __CONFIG= 
_WDT_OFF &		// Sem Watch dog timer 
_PWRTE_ON & 	// Com Power-On Reset
_BODEN_OFF &	// Com
_CP_OFF & 	    // Sem proteção do código
_DEBUG_OFF & 	// Sem debugger
_HS_OSC & 		// Oscilador cristal 4 MHZ
_CPD_OFF & 		//
_LVP_OFF; 		// Sem LVP:Low Voltage Programmming


//#define debug1


void SetPWM1freq(u8 ticks,u8 PRESC);
void setPwm1_dcy(u16 DutyCycle);


void main(){

		CMCON=7;		  // Desabilita comparadores analógicos
		ADCON0=6;		  // Todas entradas analógicas desabilitadas
		INTCON=0;		  //Sem interrupção


#ifndef debug1
		//		Tclock=4MHZ  Tpwm= 1KHZ
		//	PR2=Tpwm/(4*Tosc*PRESC2)-1= 249
		//
		//	
		SetPWM1freq(249,tmr2_1b4);

		//	Duty Cicle de 50% Tensão de saída 2.5 V
		//
		//
		setPwm1_dcy(500);

		TRISB=0;

		while(1){/*Loop Para sempre*/
		//Tudo aceso
		PORTB=0xFF;
				}
#else
//------------------------------------------------------------
		// Código alternativo de teste

		TRISB=0;
		TRISA=0;


		while(1){
		PORTB=0;
		PORTA=0;
		
		};

#endif // FIM do código alternativo de teste



} //end of main

/*----------------------------------------------------------*/





/*------------------------------------------------------------------
 ---------------------  END OF FILE --------------------------------
 ------------------------------------------------------------------*/
