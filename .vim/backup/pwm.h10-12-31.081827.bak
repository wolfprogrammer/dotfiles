
#ifndef _pwm_h_
#define _pwm_h_

#include "commdefs.h"
#include "pic/pic16f877a.h"

#define tmr2_1b1      0x00
#define tmr2_1b4      0x01
#define tmr2_1b16     0x02

#define PWM_ON		0x0C   //Turn On  PWM channel1
#define PWM_OFF		0x00


// Rotinas par o gerador PWM interno do MCU
// RC2/CCP1
//
//
//
void setPWM1freq(u8 ticks,u8 PRESC2){

	
    T2CON =0x04 | PRESC2; //Turn on TIMER2 and set timer2
    TMR2=ticks;			 //PR2=TMR2
    TRISC2=0;            //Configura TRISC2 como saída
}


// 		duty_cycle é um valor de 10 bits, até 1024
//
//
void setPwm1_dcy(u16 duty_cycle){

	//
	//

    CCPR1L=duty_cycle>>2;						// Set MSB values
	CCP1CON|=(duty_cycle & 0x03)<<4 | PWM_ON;		// Set Duty cycle and start PWM mode bits


}





#endif
/*------------------------------------------------
 ============ END OF FILE =====================
 - ---------------------------------------------*/
