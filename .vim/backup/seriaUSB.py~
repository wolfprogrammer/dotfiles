# -*- coding: utf-8 -*-
import serial

import IPython
 

print("Porta serial /dev/ttyUSB0");
print(" Objeto s");

s=serial.Serial('/dev/ttyUSB0',baudrate=9600)
s.open()
s.isOpen()

def read_packet():

	p0=ord(s.read())

	if p0 == 21 : # Pacote valido
		p1=ord(s.read())
		p2=ord(s.read())
		p3=ord(s.read())
	
		if p3== 31 : # Fim do pacote de dados
			print "p0 START  ="+str(p0)
			print "p1(ADRESH)="+str(p1)
			print "p2(ADRESL)="+str(p2)
			print "p3 END    ="+str(p3)
			adc=p1*256+p2
			volt=adc/1024.*5.0
			print "ADC value="+str(adc)
			print "ADC voltage= %.2f" % volt
			print "\n------------\n"
		 

s.write('q');	# Iniciar transmiss√£o de dados
s.write('q');
#s.readline();

while(1):
	read_packet()

embedshell = IPython.Shell.IPShellEmbed(argv=["-colors", "LightBG"])
  
embedshell()
 

